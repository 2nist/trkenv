# Theme changes summary

This file documents the recent changes related to theme removal, token CSS, and Tailwind integration in this app.

Key points

- The theme editor UI was archived and removed from the active UI surface. Original theme files were moved to `webapp/theme-archive/` for easy restoration if needed.

- The theme API endpoints were disabled on the backend (kept in code history) to prevent runtime exposure while preserving the ability to restore later.

- Token CSS (`webapp/theme/tokens.css`) is intentionally preserved and is imported from `webapp/app/src/styles/globals.css` so CSS variables/tokens remain available to components.

- Tailwind is reintroduced: the Tailwind directives (`@tailwind base; @tailwind components; @tailwind utilities;`) are placed in `globals.css` immediately after token imports so tokens are available to Tailwind-generated CSS.

Standalone build / static files

- When building for production, Next produces `.next/standalone`. Historically some `_next/static` hashed assets (manifests) were referenced at root and not present in the standalone tree, causing 404s.

- A postbuild script `webapp/app/scripts/copy-static-to-standalone.js` was added and wired to `postbuild` to copy `.next/static` into `.next/standalone/_next/static` and to copy root manifest files (`_buildManifest.js` and `_ssgManifest.js`) into the standalone root so runtime requests succeed.

Dev-time proxy (optional)

- A small proxy `webapp/app/scripts/next-proxy.js` exists as a temporary dev fallback. It rewrites requests for root manifests to the hashed folder when running the standalone server locally.

- Prefer the postbuild copy approach for CI and production; the proxy is only recommended for ad-hoc local testing.

How to rebuild locally (Windows notes)

- On Windows the native `@tailwindcss/oxide` binary may be locked by running node processes or antivirus. If `npm ci` fails with EPERM on `tailwindcss-oxide`, reboot or use WSL/Ubuntu to build.

- Recommended local steps (PowerShell):

```
cd webapp/app
npm ci
npm run build
# postbuild copy runs automatically if configured; otherwise:
node ./scripts/copy-static-to-standalone.js
```

CI

- A GitHub Actions workflow `.github/workflows/ci-standalone.yml` was added to build `webapp/app` on Ubuntu and run a verification script that checks `.next/standalone/_next/static` contains manifests and assets.

If you want changes to the proxy behavior or to permanently remove archived theme files, open an issue or a follow-up PR. For now the archive is left in place for easy rollback.

---
Generated by automation during the theme removal and Tailwind re-integration work.
